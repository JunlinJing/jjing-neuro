---
layout: default
---

<style>
/* 强制隐藏重复标题 */
.post-content > h1:first-of-type {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    overflow: hidden !important;
}

/* 隐藏导航栏中的标题 */
nav + h1, 
.nav + h1, 
header + h1, 
.header + h1, 
.wrapper > h1:first-of-type,
main > h1:first-of-type:not(.post-title) {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    overflow: hidden !important;
}
</style>

<article class="post">
    {% include seo.html %}
    
    <header class="post-header">
        {% if page.image and page.headerImage %}
            <div class="post-image">
                <img src="{{ page.image | relative_url }}" alt="{{ page.title }}">
            </div>
        {% endif %}
        
        <h1 class="post-title">{{ page.title }}</h1>
        
        <div class="post-meta">
            <time datetime="{{ page.date | date_to_xmlschema }}">
                <i class="far fa-calendar-alt"></i> {{ page.date | date: "%B %-d, %Y" }}
            </time>
            {% if page.author %}
                • <span><i class="far fa-user"></i> {{ page.author }}</span>
            {% endif %}
            {% if page.categories %}
            <div class="post-categories">
                {% for category in page.categories %}
                <a href="{{ site.baseurl }}/categories#{{ category }}" class="category">{{ category }}</a>
                {% endfor %}
            </div>
            {% endif %}
            
            {% if page.tags or page.tag %}
            <div class="post-tags">
                {% if page.tags %}
                    {% for tag in page.tags %}
                    <a href="{{ site.baseurl }}/tags#{{ tag }}" class="tag">
                        <i class="fas fa-tag"></i> {{ tag }}
                    </a>
                    {% endfor %}
                {% elsif page.tag %}
                    {% for tag in page.tag %}
                    <a href="{{ site.baseurl }}/tags#{{ tag }}" class="tag">
                        <i class="fas fa-tag"></i> {{ tag }}
                    </a>
                    {% endfor %}
                {% endif %}
            </div>
            {% endif %}
            
            <span class="reading-time" title="Estimated reading time">
                <i class="far fa-clock"></i>
                {% assign words = content | strip_html | number_of_words %}
                {% assign reading_time = words | divided_by: 200 | plus: 1 %}
                {{ reading_time }} min read
            </span>
        </div>
    </header>

    {% if page.toc %}
    <div class="table-of-contents" id="toc">
        <h2>Table of Contents</h2>
        {% include toc.html html=content %}
    </div>
    {% endif %}

    <div class="post-wrapper">
        <aside class="table-of-contents" id="toc">
            <div class="toc-title">Table of Contents</div>
            <div id="toc-content"></div>
        </aside>

        <div class="post-content">
            {{ content }}
        </div>
    </div>

    <div class="social-share">
        <div class="share-title">Share this post</div>
        <div class="share-buttons">
            <a href="https://twitter.com/intent/tweet?text={{ page.title }}&url={{ site.url }}{{ page.url }}" 
               target="_blank" class="share-button twitter" title="Share on Twitter">
                <i class="fab fa-twitter"></i>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u={{ site.url }}{{ page.url }}"
               target="_blank" class="share-button facebook" title="Share on Facebook">
                <i class="fab fa-facebook-f"></i>
            </a>
            <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ site.url }}{{ page.url }}&title={{ page.title }}"
               target="_blank" class="share-button linkedin" title="Share on LinkedIn">
                <i class="fab fa-linkedin-in"></i>
            </a>
        </div>
    </div>

    {% include post-navigation.html %}

    {% if site.related_posts.size >= 1 %}
    <div class="related-posts">
        <h3>Related Posts</h3>
        <ul>
            {% for related_post in site.related_posts limit:3 %}
            <li>
                <a href="{{ site.baseurl }}{{ related_post.url }}">
                    {{ related_post.title }}
                    <small>{{ related_post.date | date: "%B %-d, %Y" }}</small>
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    {% if site.disqus %}
        {% include comments.html %}
    {% endif %}
</article>

<div class="back-to-top" id="back-to-top">
    <i class="fas fa-arrow-up"></i>
</div>

<script src="{{ '/assets/js/optimization.js' | relative_url }}"></script>
<script>
// Back to top button
const backToTop = document.getElementById('back-to-top');
window.addEventListener('scroll', () => {
    if (window.scrollY > 300) {
        backToTop.classList.add('show');
    } else {
        backToTop.classList.remove('show');
    }
});

backToTop.addEventListener('click', () => {
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
});

// Image zoom
document.querySelectorAll('.post-content img').forEach(img => {
    img.addEventListener('click', () => {
        img.classList.toggle('zoomed');
    });
});

document.addEventListener('DOMContentLoaded', function() {
    // Generate table of contents
    const content = document.querySelector('.post-content');
    const toc = document.getElementById('toc-content');
    const headings = content.querySelectorAll('h2, h3, h4');
    
    if (headings.length > 0) {
        const tocList = document.createElement('ul');
        
        headings.forEach((heading, index) => {
            // Add ID for anchor links
            heading.id = `heading-${index}`;
            
            const li = document.createElement('li');
            const a = document.createElement('a');
            
            a.href = `#${heading.id}`;
            a.textContent = heading.textContent;
            a.style.paddingLeft = `${(heading.tagName.charAt(1) - 2) * 15}px`;
            
            li.appendChild(a);
            tocList.appendChild(li);
            
            // Smooth scroll when clicking on TOC items
            a.addEventListener('click', (e) => {
                e.preventDefault();
                heading.scrollIntoView({ behavior: 'smooth' });
            });
        });
        
        toc.appendChild(tocList);
    } else {
        document.getElementById('toc').style.display = 'none';
    }
    
    // 检查页面中的h1标题
    const pageTitle = document.querySelector('.post-title').textContent.trim();
    const contentH1s = Array.from(content.querySelectorAll('h1'));
    
    contentH1s.forEach(h1 => {
        // 如果内容中的h1标题与页面标题相同或相似，则隐藏它
        if (h1.textContent.trim() === pageTitle || 
            h1.textContent.trim().includes(pageTitle) || 
            pageTitle.includes(h1.textContent.trim())) {
            h1.style.display = 'none';
            console.log('隐藏了重复的标题:', h1.textContent);
        }
    });
});
</script>

<style>
.post {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.post-header {
    text-align: center;
    margin-bottom: 40px;
}

.post-image {
    margin: -20px -20px 30px;
    overflow: hidden;
    border-radius: 8px;
}

.post-image img {
    width: 100%;
    height: auto;
    display: block;
}

.post-title {
    font-size: 2.5em;
    margin: 20px 0;
    color: var(--heading-color);
}

.post-meta {
    color: var(--meta-color);
    font-size: 0.9em;
    margin-bottom: 20px;
}

.post-meta i {
    margin-right: 5px;
}

.post-categories, .post-tags {
    margin-top: 1em;
}

.category, .tag {
    display: inline-block;
    padding: 0.3em 0.8em;
    margin: 0.2em;
    border-radius: 15px;
    text-decoration: none;
    font-size: 0.9em;
}

.category {
    background: #e3f2fd;
    color: #1976d2;
}

.tag {
    background: #f5f5f5;
    color: #616161;
}

.post-wrapper {
    display: flex;
    gap: 40px;
    position: relative;
}

.table-of-contents {
    position: sticky;
    top: 20px;
    width: 250px;
    max-height: calc(100vh - 40px);
    overflow-y: auto;
    padding: 20px;
    background: var(--toc-bg, #f8f8f8);
    border-radius: 8px;
    font-size: 0.9em;
}

.toc-title {
    font-weight: bold;
    margin-bottom: 10px;
    padding-bottom: 5px;
    border-bottom: 2px solid var(--border-color);
}

.post-content {
    flex: 1;
    min-width: 0;
    line-height: 1.8;
    font-size: 1.1em;
}

.social-share {
    text-align: center;
    margin: 3rem 0;
    padding: 1.5rem 0;
    border-top: 1px solid var(--border-color, #eee);
}

.share-title {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--heading-color, #333);
    position: relative;
    display: inline-block;
}

.share-title:before, .share-title:after {
    content: "";
    position: absolute;
    height: 1px;
    background: var(--border-color, #eee);
    top: 50%;
    width: 50px;
}

.share-title:before {
    right: 100%;
    margin-right: 15px;
}

.share-title:after {
    left: 100%;
    margin-left: 15px;
}

.share-buttons {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 1rem;
}

.share-button {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    transition: all 0.3s ease;
    color: white;
}

.share-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.twitter {
    background-color: #1DA1F2;
}

.facebook {
    background-color: #4267B2;
}

.linkedin {
    background-color: #0077B5;
}

.related-posts {
    margin-top: 40px;
    padding-top: 20px;
    border-top: 2px solid var(--border-color);
}

.related-posts h3 {
    margin-bottom: 20px;
}

.related-posts ul {
    list-style: none;
    padding: 0;
}

.related-posts li {
    margin: 15px 0;
}

.related-posts a {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    border-radius: 8px;
    text-decoration: none;
    color: var(--text-color);
    transition: background-color 0.3s ease;
}

.related-posts a:hover {
    background-color: var(--hover-bg, #f5f5f5);
}

.related-posts small {
    color: var(--meta-color);
}

.post-navigation {
    margin: 3rem 0;
    padding: 0;
    border-top: 1px solid var(--border-color, #eee);
    border-bottom: 1px solid var(--border-color, #eee);
}

.nav-links {
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 1rem;
}

.nav-previous, .nav-next {
    flex: 1;
    min-width: 250px;
    padding: 1.5rem 0;
}

.nav-next {
    text-align: right;
    border-left: 1px solid var(--border-color, #eee);
}

.nav-subtitle {
    display: block;
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--meta-color, #666);
    margin-bottom: 0.5rem;
}

.nav-title {
    font-weight: 600;
    font-size: 1.1rem;
    color: var(--heading-color, #333);
    transition: color 0.3s ease;
}

.nav-previous a, .nav-next a {
    text-decoration: none;
    display: block;
    transition: all 0.3s ease;
    padding: 0 1rem;
}

.nav-previous a:hover .nav-title, 
.nav-next a:hover .nav-title {
    color: var(--link-color, #4263eb);
}

.nav-previous a:hover, 
.nav-next a:hover {
    transform: translateY(-2px);
}

.back-to-top {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    background: var(--link-color);
    color: white;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.back-to-top.show {
    opacity: 1;
    visibility: visible;
}

.reading-progress-bar {
    position: fixed;
    top: 0;
    left: 0;
    height: 3px;
    background: var(--link-color);
    z-index: 1000;
    transition: width 0.1s ease;
}

@media (max-width: 1024px) {
    .post-wrapper {
        flex-direction: column;
    }

    .table-of-contents {
        position: relative;
        width: 100%;
        margin-bottom: 20px;
    }
}

@media (max-width: 768px) {
    .post {
        padding: 15px;
    }

    .post-title {
        font-size: 2em;
    }

    .post-content {
        font-size: 1em;
    }

    .post-meta {
        flex-direction: column;
        align-items: center;
    }

    .table-of-contents {
        margin: 1rem -1rem;
        border-radius: 0;
    }

    .nav-links {
        flex-direction: column;
    }
    
    .nav-next {
        text-align: left;
        border-left: none;
        border-top: 1px solid var(--border-color, #eee);
    }
    
    .share-title:before, .share-title:after {
        width: 30px;
    }
}
</style>
